[1mdiff --git a/index.ts b/index.ts[m
[1mindex 734f6f7..3c7e962 100644[m
[1m--- a/index.ts[m
[1m+++ b/index.ts[m
[36m@@ -17,9 +17,20 @@[m [mconst server = http.createServer(app);[m
 [m
 console.log('ğŸš€ Starting server initialization...');[m
 [m
[31m-// ëª¨ë“  ë„ë©”ì¸ í—ˆìš© - ê°•í™”ëœ CORS ì„¤ì •[m
[32m+[m[32m// í™˜ê²½ì— ë”°ë¼ CORS ì˜µì…˜ ë¶„ê¸°[m
[32m+[m[32mconst isProduction = process.env.NODE_ENV === 'production';[m
[32m+[m[32mconst allowedOrigins = isProduction[m
[32m+[m[32m  ? [[m
[32m+[m[32m      'http://143.248.184.29:5174',[m
[32m+[m[32m      'https://143.248.184.29:5174',[m
[32m+[m[32m      'http://localhost:5174',[m
[32m+[m[32m      'https://week3client-production.up.railway.app',[m
[32m+[m[32m      // ì‹¤ì œ í”„ë¡ íŠ¸ ë°°í¬ ë„ë©”ì¸ ì¶”ê°€[m
[32m+[m[32m    ][m
[32m+[m[32m  : true;[m
[32m+[m
 const corsOptions = {[m
[31m-  origin: '*', // ë‚˜ì¤‘ì— ë„ë©”ì¸ìœ¼ë¡œ ë³€ê²½[m
[32m+[m[32m  origin: '*',[m
   credentials: true,[m
   methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],[m
   allowedHeaders: ['Content-Type', 'Authorization', 'X-Requested-With', 'Accept'],[m
[36m@@ -45,30 +56,30 @@[m [mconst startServer = async () => {[m
     [m
     console.log('ğŸ”§ Setting up middleware...');[m
     [m
[31m-    // CORS ë¯¸ë“¤ì›¨ì–´ë¥¼ ê°€ì¥ ë¨¼ì € ì„¤ì •[m
[31m-    app.use(cors(corsOptions));[m
[31m-    [m
[31m-    // ì¶”ê°€ CORS í—¤ë” ì„¤ì • - ë” ê°•ë ¥í•œ ë²„ì „[m
[32m+[m[32m    // CORS í—¤ë”ë¥¼ ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ ê°€ì¥ ë¨¼ì € ê°•ì œ ì ìš© (íŠ¹íˆ OPTIONS)[m
     app.use((req, res, next) => {[m
[31m-      // ëª¨ë“  ë„ë©”ì¸ í—ˆìš©[m
[31m-      res.header('Access-Control-Allow-Origin', '*');[m
[31m-      res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS, HEAD');[m
[31m-      res.header('Access-Control-Allow-Headers', '*');[m
[31m-      res.header('Access-Control-Expose-Headers', '*');[m
[31m-      res.header('Access-Control-Allow-Credentials', 'false');[m
[31m-      res.header('Access-Control-Max-Age', '86400');[m
[31m-      [m
[31m-      // OPTIONS ìš”ì²­ ì²˜ë¦¬[m
[32m+[m[32m      const origin = req.headers.origin;[m
[32m+[m[32m      if (origin) {[m
[32m+[m[32m        res.setHeader('Access-Control-Allow-Origin', origin);[m
[32m+[m[32m        res.setHeader('Vary', 'Origin');[m
[32m+[m[32m        res.setHeader('Access-Control-Allow-Credentials', 'true');[m
[32m+[m[32m        res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');[m
[32m+[m[32m        res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization, X-Requested-With, Accept');[m
[32m+[m[32m      }[m
       if (req.method === 'OPTIONS') {[m
[31m-        res.status(200).end();[m
[32m+[m[32m        res.writeHead(200, {[m
[32m+[m[32m          'Access-Control-Allow-Origin': origin || '*',[m
[32m+[m[32m          'Access-Control-Allow-Credentials': 'true',[m
[32m+[m[32m          'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',[m
[32m+[m[32m          'Access-Control-Allow-Headers': 'Content-Type, Authorization, X-Requested-With, Accept',[m
[32m+[m[32m          'Vary': 'Origin'[m
[32m+[m[32m        });[m
[32m+[m[32m        res.end();[m
         return;[m
       }[m
[31m-      [m
       next();[m
     });[m
     [m
[31m-    console.log('âœ… CORS configured with origin: *');[m
[31m-    [m
     // HTTP ìš”ì²­ ë¡œê·¸ ë¯¸ë“¤ì›¨ì–´[m
     app.use((req, res, next) => {[m
       console.log(`ğŸ“¡ HTTP ${req.method} ${req.url} - ${new Date().toISOString()}`);[m
[36m@@ -79,6 +90,37 @@[m [mconst startServer = async () => {[m
       next();[m
     });[m
     [m
[32m+[m[32m    // ìƒì„¸ HTTP ìš”ì²­/ì‘ë‹µ ë¡œê¹… ë¯¸ë“¤ì›¨ì–´ (ê°œë°œ/ë””ë²„ê¹…ìš©)[m
[32m+[m[32m    app.use(async (req, res, next) => {[m
[32m+[m[32m      console.log('======== HEADER ========');[m
[32m+[m[32m      console.log(req.method, req.url);[m
[32m+[m[32m      console.log(req.headers);[m
[32m+[m[32m      console.log('========= BODY =========');[m
[32m+[m[32m      if (req.body && Object.keys(req.body).length > 0) {[m
[32m+[m[32m        console.log(req.body);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        console.log('(empty)');[m
[32m+[m[32m      }[m
[32m+[m[32m      // ì‘ë‹µ ë¡œê¹…ì„ ìœ„í•´ res.sendë¥¼ ê°ì‹¼ë‹¤[m
[32m+[m[32m      const oldSend = res.send;[m
[32m+[m[32m      res.send = function (body) {[m
[32m+[m[32m        console.log('======= RESPONSE =======');[m
[32m+[m[32m        // ì‘ë‹µ í—¤ë”[m
[32m+[m[32m        console.log(res.getHeaders());[m
[32m+[m[32m        // ì‘ë‹µ ë°”ë””[m
[32m+[m[32m        try {[m
[32m+[m[32m          const parsed = typeof body === 'string' ? JSON.parse(body) : body;[m
[32m+[m[32m          console.log(parsed);[m
[32m+[m[32m        } catch {[m
[32m+[m[32m          console.log(body);[m
[32m+[m[32m        }[m
[32m+[m[32m        console.log('========================');[m
[32m+[m[32m        // ì›ë˜ send í˜¸ì¶œ[m
[32m+[m[32m        return oldSend.call(this, body);[m
[32m+[m[32m      };[m
[32m+[m[32m      next();[m
[32m+[m[32m    });[m
[32m+[m[41m    [m
     // JSON íŒŒì‹± ë¯¸ë“¤ì›¨ì–´[m
     app.use(express.json());[m
     [m
[36m@@ -134,13 +176,6 @@[m [minitializeSocketHandlers(io);[m
       console.log(`ğŸ¥ Health check available at: http://localhost:${PORT}/health`);[m
       console.log(`ğŸ“¡ Server ready to accept connections!`);[m
     });[m
[31m-[m
[31m-    // ì„œë²„ ì—ëŸ¬ í•¸ë“¤ë§[m
[31m-    server.on('error', (error) => {[m
[31m-      console.error('âŒ Server error:', error);[m
[31m-      process.exit(1);[m
[31m-    });[m
[31m-[m
   } catch (error) {[m
     console.error('âŒ Failed to start server:', error);[m
     console.error('âŒ Error details:', {[m
[36m@@ -164,3 +199,4 @@[m [mprocess.on('unhandledRejection', (reason, promise) => {[m
 [m
 console.log('ğŸš€ Starting server...');[m
 startServer();[m
[41m+  [m
\ No newline at end of file[m
